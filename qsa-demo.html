<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QSA - ì´ì¤‘ ì„œëª… ê²€ì¦ í”„ë¡œì„¸ìŠ¤ ì‹œë®¬ë ˆì´ì…˜</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #0066cc;
            --primary-dark: #004499;
            --primary-light: #3385d6;
            --secondary-color: #4a90e2;
            --accent-color: #ff6b6b;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --text-dark: #1a1a1a;
            --text-light: #666666;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --border-color: #e0e0e0;
            --gradient-primary: linear-gradient(135deg, #0066cc 0%, #4a90e2 100%);
            --gradient-hero: linear-gradient(135deg, #0066cc 0%, #3385d6 100%);
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text-dark);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--bg-white);
            border-radius: 24px;
            box-shadow: var(--shadow-lg);
            overflow: hidden;
        }

        .header {
            background: var(--gradient-primary);
            padding: 40px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .header p {
            font-size: 1rem;
            opacity: 0.95;
            position: relative;
            z-index: 1;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 1.5rem;
            color: var(--text-dark);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }

        .flow-container {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .box {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 20px;
            border: 2px solid var(--border-color);
        }

        .box.client {
            border-color: var(--primary-color);
        }

        .box.channel {
            border-color: var(--secondary-color);
        }

        .box.bank {
            border-color: #ff9800;
        }

        .box.auth {
            border-color: var(--success-color);
        }

        .box-header {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 15px;
            color: var(--text-dark);
            text-align: center;
            padding: 8px;
            border-radius: 6px;
            background: rgba(0, 0, 0, 0.05);
        }

        .box.client .box-header {
            background: rgba(0, 102, 204, 0.1);
        }

        .box.channel .box-header {
            background: rgba(74, 144, 226, 0.1);
        }

        .box.bank .box-header {
            background: rgba(255, 152, 0, 0.1);
        }

        .box.auth .box-header {
            background: rgba(40, 167, 69, 0.1);
        }

        .step-item {
            background: white;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 8px;
            border-left: 4px solid var(--primary-color);
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .step-item.active {
            background: rgba(0, 102, 204, 0.1);
            border-left-color: var(--success-color);
            transform: translateX(5px);
            box-shadow: var(--shadow-sm);
        }

        .step-item.completed {
            background: rgba(40, 167, 69, 0.1);
            border-left-color: var(--success-color);
        }

        .step-item.error {
            background: rgba(255, 107, 107, 0.1);
            border-left-color: var(--accent-color);
        }

        .step-title {
            font-weight: 600;
            margin-bottom: 4px;
            color: var(--text-dark);
            font-size: 0.85rem;
        }

        .step-detail {
            font-size: 0.75rem;
            color: var(--text-light);
            font-family: 'Courier New', monospace;
            background: rgba(0, 0, 0, 0.03);
            padding: 6px;
            border-radius: 4px;
            margin-top: 4px;
            word-break: break-all;
        }

        .button-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-primary:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: var(--bg-white);
            color: var(--text-dark);
            border: 2px solid var(--border-color);
        }

        .btn-secondary:hover {
            background: var(--bg-light);
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .status-success {
            background: rgba(40, 167, 69, 0.2);
            color: var(--success-color);
        }

        .status-error {
            background: rgba(255, 107, 107, 0.2);
            color: var(--accent-color);
        }

        .info-box {
            background: rgba(0, 102, 204, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .info-box h4 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .info-box ul {
            margin-left: 20px;
            color: var(--text-light);
        }

        .info-box li {
            margin: 5px 0;
        }

        .arrow {
            text-align: center;
            font-size: 1.5rem;
            color: var(--primary-color);
            margin: 10px 0;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .phase-badge {
            display: inline-block;
            padding: 6px 16px;
            background: var(--primary-color);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-left: 15px;
        }

        @media (max-width: 1200px) {
            .flow-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .flow-container {
                grid-template-columns: 1fr;
            }
            
            .content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ” QSA ì´ì¤‘ ì„œëª… ê²€ì¦ í”„ë¡œì„¸ìŠ¤</h1>
            <p>Phase 1: ì´ˆê¸° ì¸ì¦ í† í° ë°œê¸‰ & Phase 2: API í˜¸ì¶œ ì‹œ ì´ì¤‘ ì„œëª… ê²€ì¦</p>
        </div>

        <div class="content">
            <!-- Phase 1: ì´ˆê¸° ì¸ì¦ í† í° ë°œê¸‰ -->
            <div class="section">
                <h2 class="section-title">
                    Phase 1: ì´ˆê¸° ì¸ì¦ í† í° ë°œê¸‰
                    <span class="phase-badge">1-9ë‹¨ê³„</span>
                </h2>
                
                <div class="flow-container">
                    <div class="box client">
                        <div class="box-header">ğŸ“± Client (Browser) + WebSafeBox</div>
                        <div id="phase1ClientSteps">
                            <div class="step-item">
                                <div class="step-title">1. í‚¤ ìŒ ìƒì„±</div>
                                <div class="step-detail">ë§¤ì²´ ì¸ì¦ìš© Private/Public Key ìƒì„±</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">2. ì¸ì¦ ìš”ì²­</div>
                                <div class="step-detail">Public Key í¬í•¨í•˜ì—¬ ì „ì†¡</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">9. í† í° ì €ì¥</div>
                                <div class="step-detail">APIAuthTokenì„ WSBì— ì €ì¥</div>
                            </div>
                        </div>
                    </div>

                    <div class="box channel">
                        <div class="box-header">ğŸ¢ ê³ ê°ì‚¬ ì±„ë„(ì—…ë¬´)</div>
                        <div id="phase1ChannelSteps">
                            <div class="step-item">
                                <div class="step-title">2. ìš”ì²­ ìˆ˜ì‹ </div>
                                <div class="step-detail">ì¸ì¦ ìš”ì²­ ìˆ˜ì‹ </div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">3. ìš”ì²­ ì „ë‹¬</div>
                                <div class="step-detail">ì€í–‰ ì¸ì¦ì„¼í„°ë¡œ ì „ë‹¬</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">8. í† í° ì „ë‹¬</div>
                                <div class="step-detail">Clientë¡œ í† í° ì „ë‹¬</div>
                            </div>
                        </div>
                    </div>

                    <div class="box bank">
                        <div class="box-header">ğŸ¦ ì€í–‰ ì¸ì¦ì„¼í„°</div>
                        <div id="phase1BankSteps">
                            <div class="step-item">
                                <div class="step-title">3. ìš”ì²­ ìˆ˜ì‹ </div>
                                <div class="step-detail">ì¸ì¦ ìš”ì²­ ìˆ˜ì‹ </div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">4. ì¸ì¦ ê²€ì¦</div>
                                <div class="step-detail">ì‚¬ìš©ì ì¸ì¦ ìˆ˜í–‰</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">5. í† í° ë°œê¸‰ ìš”ì²­</div>
                                <div class="step-detail">APIAuth Serverë¡œ ìš”ì²­</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">7. í† í° ìˆ˜ì‹ </div>
                                <div class="step-detail">APIAuthToken ìˆ˜ì‹ </div>
                            </div>
                        </div>
                    </div>

                    <div class="box auth">
                        <div class="box-header">ğŸ”‘ APIAuth Server</div>
                        <div id="phase1AuthSteps">
                            <div class="step-item">
                                <div class="step-title">5. ìš”ì²­ ìˆ˜ì‹ </div>
                                <div class="step-detail">í† í° ë°œê¸‰ ìš”ì²­ ìˆ˜ì‹ </div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">6. JWT ìƒì„±</div>
                                <div class="step-detail">Public Key í¬í•¨ JWT ìƒì„±</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">7. í† í° ì „ë‹¬</div>
                                <div class="step-detail">ì€í–‰ ì¸ì¦ì„¼í„°ë¡œ ì „ë‹¬</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" id="btnPhase1Start" onclick="startPhase1()">
                        ğŸš€ Phase 1 ì‹œì‘
                    </button>
                    <button class="btn btn-primary" id="btnPhase1Next" onclick="nextPhase1Step()" disabled style="display: none;">
                        â­ï¸ ë‹¤ìŒ ë‹¨ê³„
                    </button>
                    <button class="btn btn-secondary" onclick="resetSimulation()">
                        ğŸ”„ ì´ˆê¸°í™”
                    </button>
                </div>
            </div>

            <!-- Phase 2: API í˜¸ì¶œ ì‹œ ì´ì¤‘ ì„œëª… ê²€ì¦ -->
            <div class="section">
                <h2 class="section-title">
                    Phase 2: API í˜¸ì¶œ ì‹œ ì´ì¤‘ ì„œëª… ê²€ì¦
                    <span class="phase-badge">10-13ë‹¨ê³„</span>
                </h2>
                
                <div class="flow-container">
                    <div class="box client">
                        <div class="box-header">ğŸ“± Client (Browser)</div>
                        <div id="phase2ClientSteps">
                            <div class="step-item">
                                <div class="step-title">10. ì„œëª… ìƒì„±</div>
                                <div class="step-detail">Private Keyë¡œ API íŒŒë¼ë¯¸í„° ì„œëª…</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">11. API ìš”ì²­</div>
                                <div class="step-detail">JWT + ì„œëª…ê°’ ì „ì†¡</div>
                            </div>
                        </div>
                    </div>

                    <div class="box channel">
                        <div class="box-header">ğŸ¢ ê³ ê°ì‚¬ ì±„ë„(ì—…ë¬´) + APIAuth Agent</div>
                        <div id="phase2ChannelSteps">
                            <div class="step-item">
                                <div class="step-title">11. ìš”ì²­ ìˆ˜ì‹ </div>
                                <div class="step-detail">API ìš”ì²­ ìˆ˜ì‹ </div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">12. 1ì°¨ ê²€ì¦</div>
                                <div class="step-detail">JWT í† í° ê²€ì¦</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">13. 2ì°¨ ê²€ì¦</div>
                                <div class="step-detail">ì„œëª…ê°’ ê²€ì¦</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">ê²€ì¦ ê²°ê³¼</div>
                                <div class="step-detail" id="phase2Result">ëŒ€ê¸° ì¤‘...</div>
                            </div>
                        </div>
                    </div>

                    <div class="box auth" style="grid-column: span 2;">
                        <div class="box-header">ğŸ”‘ APIAuth Server (JWKS ì œê³µ)</div>
                        <div id="phase2AuthSteps">
                            <div class="step-item">
                                <div class="step-title">12. JWT ê²€ì¦</div>
                                <div class="step-detail">JWKSë¡œ JWT ì„œëª… ê²€ì¦</div>
                            </div>
                            <div class="step-item">
                                <div class="step-title">Public Key ì¶”ì¶œ</div>
                                <div class="step-detail">JWT Payloadì—ì„œ Public Key ì¶”ì¶œ</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="info-box">
                    <h4>ì´ì¤‘ ì„œëª… ê²€ì¦ì˜ í•µì‹¬</h4>
                    <ul>
                        <li><strong>1ì°¨ ê²€ì¦ (JWT í† í°):</strong> ì‚¬ìš©ìê°€ ì¸ì¦ëœ ì‚¬ìš©ìì¸ì§€ í™•ì¸</li>
                        <li><strong>2ì°¨ ê²€ì¦ (ì„œëª…ê°’):</strong> API íŒŒë¼ë¯¸í„°ì˜ ë¬´ê²°ì„± ë° ìœ„ë³€ì¡° ì—¬ë¶€ í™•ì¸</li>
                        <li><strong>ë‘ ê²€ì¦ ëª¨ë‘ í†µê³¼í•´ì•¼ API í˜¸ì¶œ í—ˆìš©</strong></li>
                    </ul>
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" id="btnPhase2Start" onclick="startPhase2()" disabled>
                        ğŸ“¤ Phase 2 ì‹œì‘
                    </button>
                    <button class="btn btn-primary" id="btnPhase2Next" onclick="nextPhase2Step()" disabled style="display: none;">
                        â­ï¸ ë‹¤ìŒ ë‹¨ê³„
                    </button>
                </div>
            </div>

            <!-- ë³´ì•ˆ íŠ¹ì§• -->
            <div class="section">
                <h2 class="section-title">ğŸ”’ QSA ë³´ì•ˆ íŠ¹ì§•</h2>
                <div class="info-box">
                    <h4>ì´ì¤‘ ì„œëª… ê²€ì¦ì˜ ì¥ì </h4>
                    <ul>
                        <li><strong>ì¬ì „ì†¡ ê³µê²© ë°©ì§€:</strong> ì„œëª…ê°’ ê²€ì¦ìœ¼ë¡œ ë™ì¼í•œ ìš”ì²­ ì¬ì‚¬ìš© ë¶ˆê°€</li>
                        <li><strong>íŒŒë¼ë¯¸í„° ìœ„ë³€ì¡° ë°©ì§€:</strong> ì„œëª…ì— í¬í•¨ëœ ë°ì´í„° ë³€ê²½ ì‹œ ê²€ì¦ ì‹¤íŒ¨</li>
                        <li><strong>ì±„ë„ ê²€ì¦:</strong> Private Key ì†Œìœ  ì—¬ë¶€ë¡œ ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ í™•ì¸</li>
                        <li><strong>Stateless ì•„í‚¤í…ì²˜:</strong> ì„œë²„ ì €ì¥ì†Œ ë¶ˆí•„ìš”, í™•ì¥ì„± í™•ë³´</li>
                        <li><strong>PQC ì•”í˜¸í™”:</strong> ì–‘ì ì»´í“¨í„° ê³µê²©ì—ë„ ì•ˆì „í•œ ì•”í˜¸í™”</li>
                    </ul>
                </div>
            </div>

            <!-- ë©”ì¸ í™”ë©´ ì´ë™ ë§í¬ -->
            <div class="section" style="text-align: center; padding-top: 20px; border-top: 2px solid var(--border-color);">
                <a href="index.html" class="btn btn-primary" style="text-decoration: none; display: inline-block;">
                    ğŸ  ë©”ì¸ í™”ë©´ìœ¼ë¡œ ì´ë™
                </a>
            </div>
        </div>
    </div>

    <script>
        // ì‹œë®¬ë ˆì´ì…˜ ìƒíƒœ
        let phase1Completed = false;
        let phase2Completed = false;
        let phase1CurrentStep = -1;
        let phase2CurrentStep = -1;

        // Phase 1 ë‹¨ê³„ ì •ì˜
        const phase1Steps = [
            { client: 0, channel: -1, bank: -1, auth: -1, name: '1. í‚¤ ìŒ ìƒì„±' },
            { client: 1, channel: 0, bank: -1, auth: -1, name: '2. ì¸ì¦ ìš”ì²­' },
            { client: -1, channel: 1, bank: 0, auth: -1, name: '3. ìš”ì²­ ì „ë‹¬' },
            { client: -1, channel: -1, bank: 1, auth: -1, name: '4. ì¸ì¦ ê²€ì¦' },
            { client: -1, channel: -1, bank: 2, auth: 0, name: '5. í† í° ë°œê¸‰ ìš”ì²­' },
            { client: -1, channel: -1, bank: -1, auth: 1, name: '6. JWT ìƒì„±' },
            { client: -1, channel: -1, bank: 3, auth: 2, name: '7. í† í° ì „ë‹¬' },
            { client: -1, channel: 2, bank: -1, auth: -1, name: '8. í† í° ì „ë‹¬' },
            { client: 2, channel: -1, bank: -1, auth: -1, name: '9. í† í° ì €ì¥' }
        ];

        // Phase 1 ì‹œì‘
        function startPhase1() {
            resetPhase1();
            phase1CurrentStep = 0;
            document.getElementById('btnPhase1Start').style.display = 'none';
            document.getElementById('btnPhase1Next').style.display = 'inline-block';
            document.getElementById('btnPhase1Next').disabled = false;
            nextPhase1Step();
        }

        // Phase 1 ë‹¤ìŒ ë‹¨ê³„
        function nextPhase1Step() {
            if (phase1CurrentStep < 0 || phase1CurrentStep >= phase1Steps.length) {
                return;
            }

            const step = phase1Steps[phase1CurrentStep];
            const clientSteps = document.querySelectorAll('#phase1ClientSteps .step-item');
            const channelSteps = document.querySelectorAll('#phase1ChannelSteps .step-item');
            const bankSteps = document.querySelectorAll('#phase1BankSteps .step-item');
            const authSteps = document.querySelectorAll('#phase1AuthSteps .step-item');

            // ì´ì „ ë‹¨ê³„ ì™„ë£Œ ì²˜ë¦¬
            if (phase1CurrentStep > 0) {
                const prevStep = phase1Steps[phase1CurrentStep - 1];
                if (prevStep.client >= 0) clientSteps[prevStep.client].classList.remove('active');
                if (prevStep.channel >= 0) channelSteps[prevStep.channel].classList.remove('active');
                if (prevStep.bank >= 0) bankSteps[prevStep.bank].classList.remove('active');
                if (prevStep.auth >= 0) authSteps[prevStep.auth].classList.remove('active');
            }

            // í˜„ì¬ ë‹¨ê³„ í™œì„±í™”
            if (step.client >= 0) {
                clientSteps[step.client].classList.add('active');
            }
            if (step.channel >= 0) {
                channelSteps[step.channel].classList.add('active');
            }
            if (step.bank >= 0) {
                bankSteps[step.bank].classList.add('active');
            }
            if (step.auth >= 0) {
                authSteps[step.auth].classList.add('active');
            }

            phase1CurrentStep++;

            // ë§ˆì§€ë§‰ ë‹¨ê³„ì¸ì§€ í™•ì¸
            if (phase1CurrentStep >= phase1Steps.length) {
                // ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ ì²˜ë¦¬
                const lastStep = phase1Steps[phase1Steps.length - 1];
                if (lastStep.client >= 0) {
                    clientSteps[lastStep.client].classList.remove('active');
                    clientSteps[lastStep.client].classList.add('completed');
                }
                if (lastStep.channel >= 0) {
                    channelSteps[lastStep.channel].classList.remove('active');
                    channelSteps[lastStep.channel].classList.add('completed');
                }
                if (lastStep.bank >= 0) {
                    bankSteps[lastStep.bank].classList.remove('active');
                    bankSteps[lastStep.bank].classList.add('completed');
                }
                if (lastStep.auth >= 0) {
                    authSteps[lastStep.auth].classList.remove('active');
                    authSteps[lastStep.auth].classList.add('completed');
                }

                phase1Completed = true;
                document.getElementById('btnPhase1Next').disabled = true;
                document.getElementById('btnPhase2Start').disabled = false;
            }
        }

        // Phase 1 ì´ˆê¸°í™”
        function resetPhase1() {
            phase1CurrentStep = -1;
            document.querySelectorAll('#phase1ClientSteps .step-item, #phase1ChannelSteps .step-item, #phase1BankSteps .step-item, #phase1AuthSteps .step-item').forEach(item => {
                item.classList.remove('active', 'completed', 'error');
            });
        }

        // Phase 2 ë‹¨ê³„ ì •ì˜
        const phase2Steps = [
            { client: 0, channel: -1, auth: -1, name: '10. ì„œëª… ìƒì„±' },
            { client: 1, channel: 0, auth: -1, name: '11. API ìš”ì²­ ì „ì†¡' },
            { client: -1, channel: 1, auth: 0, name: '12. 1ì°¨ ê²€ì¦: JWT í† í° ê²€ì¦' },
            { client: -1, channel: -1, auth: 1, name: 'Public Key ì¶”ì¶œ' },
            { client: -1, channel: 2, auth: -1, name: '13. 2ì°¨ ê²€ì¦: ì„œëª…ê°’ ê²€ì¦' },
            { client: -1, channel: 3, auth: -1, name: 'ê²€ì¦ ê²°ê³¼' }
        ];

        // Phase 2 ì‹œì‘
        function startPhase2() {
            if (!phase1Completed) {
                alert('ë¨¼ì € Phase 1ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”.');
                return;
            }

            resetPhase2();
            phase2CurrentStep = 0;
            document.getElementById('btnPhase2Start').style.display = 'none';
            document.getElementById('btnPhase2Next').style.display = 'inline-block';
            document.getElementById('btnPhase2Next').disabled = false;
            nextPhase2Step();
        }

        // Phase 2 ë‹¤ìŒ ë‹¨ê³„
        function nextPhase2Step() {
            if (phase2CurrentStep < 0 || phase2CurrentStep >= phase2Steps.length) {
                return;
            }

            const step = phase2Steps[phase2CurrentStep];
            const clientSteps = document.querySelectorAll('#phase2ClientSteps .step-item');
            const channelSteps = document.querySelectorAll('#phase2ChannelSteps .step-item');
            const authSteps = document.querySelectorAll('#phase2AuthSteps .step-item');

            // ì´ì „ ë‹¨ê³„ ì™„ë£Œ ì²˜ë¦¬
            if (phase2CurrentStep > 0) {
                const prevStep = phase2Steps[phase2CurrentStep - 1];
                if (prevStep.client >= 0) clientSteps[prevStep.client].classList.remove('active');
                if (prevStep.channel >= 0) channelSteps[prevStep.channel].classList.remove('active');
                if (prevStep.auth >= 0) authSteps[prevStep.auth].classList.remove('active');
            }

            // í˜„ì¬ ë‹¨ê³„ í™œì„±í™”
            if (step.client >= 0) {
                clientSteps[step.client].classList.add('active');
            }
            if (step.channel >= 0) {
                channelSteps[step.channel].classList.add('active');
                if (step.channel === 3) {
                    // ê²€ì¦ ê²°ê³¼ í‘œì‹œ
                    document.getElementById('phase2Result').innerHTML = 
                        `<span class="status-badge status-success">âœ… ê²€ì¦ í†µê³¼</span><br>` +
                        `JWT í† í° ê²€ì¦ ì„±ê³µ<br>` +
                        `ì„œëª…ê°’ ê²€ì¦ ì„±ê³µ<br>` +
                        `API í˜¸ì¶œ í—ˆìš©`;
                }
            }
            if (step.auth >= 0) {
                authSteps[step.auth].classList.add('active');
            }

            phase2CurrentStep++;

            // ë§ˆì§€ë§‰ ë‹¨ê³„ì¸ì§€ í™•ì¸
            if (phase2CurrentStep >= phase2Steps.length) {
                // ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ ì²˜ë¦¬
                const lastStep = phase2Steps[phase2Steps.length - 1];
                if (lastStep.client >= 0) {
                    clientSteps[lastStep.client].classList.remove('active');
                    clientSteps[lastStep.client].classList.add('completed');
                }
                if (lastStep.channel >= 0) {
                    channelSteps[lastStep.channel].classList.remove('active');
                    channelSteps[lastStep.channel].classList.add('completed');
                }
                if (lastStep.auth >= 0) {
                    authSteps[lastStep.auth].classList.remove('active');
                    authSteps[lastStep.auth].classList.add('completed');
                }

                phase2Completed = true;
                document.getElementById('btnPhase2Next').disabled = true;
            }
        }

        // Phase 2 ì´ˆê¸°í™”
        function resetPhase2() {
            phase2CurrentStep = -1;
            document.querySelectorAll('#phase2ClientSteps .step-item, #phase2ChannelSteps .step-item, #phase2AuthSteps .step-item').forEach(item => {
                item.classList.remove('active', 'completed', 'error');
            });
            document.getElementById('phase2Result').textContent = 'ëŒ€ê¸° ì¤‘...';
        }

        // ì´ˆê¸°í™”
        function resetSimulation() {
            phase1Completed = false;
            phase2Completed = false;
            phase1CurrentStep = -1;
            phase2CurrentStep = -1;

            // ëª¨ë“  ë‹¨ê³„ ì´ˆê¸°í™”
            document.querySelectorAll('.step-item').forEach(item => {
                item.classList.remove('active', 'completed', 'error');
            });

            // Phase 1 ë²„íŠ¼ ì´ˆê¸°í™”
            document.getElementById('btnPhase1Start').style.display = 'inline-block';
            document.getElementById('btnPhase1Next').style.display = 'none';
            document.getElementById('btnPhase1Next').disabled = true;

            // Phase 2 ë²„íŠ¼ ì´ˆê¸°í™”
            document.getElementById('btnPhase2Start').disabled = true;
            document.getElementById('btnPhase2Start').style.display = 'inline-block';
            document.getElementById('btnPhase2Next').style.display = 'none';
            document.getElementById('btnPhase2Next').disabled = true;
            document.getElementById('phase2Result').textContent = 'ëŒ€ê¸° ì¤‘...';
        }

        // ìœ í‹¸ë¦¬í‹°
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }
    </script>
</body>
</html>

